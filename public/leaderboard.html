<!-- public/leaderboard.html -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Leaderboard - Seoul Pickleball League</title>

    <!-- Link to External CSS -->
    <link rel="stylesheet" href="styles.css" />

    <!-- Font Awesome for Navigation Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-pCk4emg5G88fhrIg/OJrz90GYcKCe9R/ZKHX68tY6JvCUtjEN2eNj1kPSENlt1nNndIKXOr6mZ2VwKw5iTtj5g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <!-- Navigation Bar -->
    <nav>
      <a href="index.html">Home</a>
      <a href="leaderboard.html">Leaderboard</a>
      <a href="schedule.html">Schedule</a>
      <a href="results.html">Results</a>
      <a href="rules.html">Rules</a>
      <a href="announcements.html">Announcements</a>
      <a href="contact.html">Contact</a>
      <a href="admin.html">Admin</a>
    </nav>

    <!-- Main Container -->
    <div class="container">
      <h1>Seoul Pickleball League - Leaderboard</h1>
      <table class="leaderboard">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Player Name</th>
            <th>Matches Played</th>
            <th>Wins</th>
            <th>Win Rate (%)</th>
            <th>Points</th>
          </tr>
        </thead>
        <tbody id="leaderboardBody">
          <!-- Leaderboard data will be populated here via JavaScript -->
        </tbody>
      </table>
    </div>

    <script>
      // public/leaderboard.js

      document.addEventListener("DOMContentLoaded", async () => {
        const leaderboardBody = document.getElementById("leaderboardBody");

        try {
          const res = await fetch("/api/leaderboard");
          const players = await res.json();

          players.forEach((player, index) => {
            const row = document.createElement("tr");

            // Rank
            const rankCell = document.createElement("td");
            rankCell.textContent = index + 1;
            row.appendChild(rankCell);

            // Player Name (Clickable)
            const nameCell = document.createElement("td");
            const playerLink = document.createElement("a");
            playerLink.href = `player.html?name=${encodeURIComponent(
              player.name
            )}`;
            playerLink.textContent = player.name;
            nameCell.appendChild(playerLink);
            row.appendChild(nameCell);

            // Matches Played
            const matchesCell = document.createElement("td");
            matchesCell.textContent = player.matchesPlayed;
            row.appendChild(matchesCell);

            // Wins
            const winsCell = document.createElement("td");
            winsCell.textContent = player.wins;
            row.appendChild(winsCell);

            // Win Rate
            const winRateCell = document.createElement("td");
            winRateCell.textContent = player.winRate;
            row.appendChild(winRateCell);

            // Points
            const pointsCell = document.createElement("td");
            pointsCell.textContent = player.points;
            row.appendChild(pointsCell);

            leaderboardBody.appendChild(row);
          });
        } catch (error) {
          console.error("Error fetching leaderboard data:", error);
          leaderboardBody.innerHTML = `<tr><td colspan="6">Failed to load leaderboard.</td></tr>`;
        }
      });
    </script>
  </body>
</html>
